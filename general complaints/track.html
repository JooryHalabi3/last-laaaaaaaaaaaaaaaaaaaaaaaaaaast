<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ุชุชุจุน ุญุงูุฉ ุงูุดููู</title>
   <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="track.css" />
  <script src="track.js" defer></script>
</head>
<body>
<header class="header">
    <div class="header-content">
         <div class="header-title" data-ar="ุนููููููููููู" data-en="AOUNAK">ุนููููููููููู</div>
      <img src="/icon/hospital-logo.png" alt="ุดุนุงุฑ ุงููุณุชุดูู" class="header-logo">
      <button id="langToggle" class="lang-toggle-btn">
        <img src="/icon/lang.png" alt="language" class="lang-icon" />
        <span id="langText">ุงูุนุฑุจูุฉ | English</span>
      </button>
    </div>  
  </header>
  <br>
  <div class="back-button">
      <a href="#" onclick="goBack()">
        <img src="/icon/Back.png" alt="Back Icon" class="back-icon" />
        <span data-ar="ุนูุฏุฉ" data-en="Back">ุนูุฏุฉ</span>
      </a>
    </a><br>
  </div>
  <div class="container">
  <div class="complaint-title">
    <h3 data-ar="ุชุชุจุน ุญุงูุฉ ุงูุดููู" data-en="Complaint Tracking">
      ุชุชุจุน ุญุงูุฉ ุงูุดููู <span id="complaintNumber">ุฌุงุฑู ุงูุชุญููู...</span>
    </h3>
    <p class="last-update" data-ar="ุฌุงุฑู ุงูุชุญููู..." data-en="Loading...">
      ุฌุงุฑู ุงูุชุญููู...
    </p>
  </div>

  <section class="complaint-meta-box">
    <h4 data-ar="ูุนูููุงุช ุงูุดููู" data-en="Complaint Info">ูุนูููุงุช ุงูุดููู</h4>
    <div class="meta-table">
      <div class="row">
        <div class="label" data-ar="ุฑูู ุงูุดููู:" data-en="Complaint ID:">ุฑูู ุงูุดููู:</div>
        <div class="value" id="complaintNumber2">ุฌุงุฑู ุงูุชุญููู...</div>
        <div class="label" data-ar="ุชุงุฑูุฎ ุงูุชูุฏูู:" data-en="Submission Date:">ุชุงุฑูุฎ ุงูุชูุฏูู:</div>
        <div class="value" id="creationDate">ุฌุงุฑู ุงูุชุญููู...</div>
      </div>
      <div class="row">
        <div class="label" data-ar="ุฑูู ุงููููุฉ:" data-en="ID Number:">ุฑูู ุงููููุฉ:</div>
        <div class="value" id="patientId">ุฌุงุฑู ุงูุชุญููู...</div>
        <div class="label" data-ar="ุฑูู ุงูุฌูุงู:" data-en="Mobile Number:">ุฑูู ุงูุฌูุงู:</div>
        <div class="value" id="mobileNumber">ุฌุงุฑู ุงูุชุญููู...</div>
      </div>
      <div class="row">
        <div class="label" data-ar="ุงุณู ุงููุฑูุถ:" data-en="Patient Name:">ุงุณู ุงููุฑูุถ:</div>
        <div class="value" id="patientName">ุฌุงุฑู ุงูุชุญููู...</div>
        <div class="label" data-ar="ุงูููุธู ุงููุณุคูู:" data-en="Responsible Employee:">ุงูููุธู ุงููุณุคูู:</div>
        <div class="value" id="responsibleEmployee">ุฌุงุฑู ุงูุชุญููู...</div>
      </div>
      <div class="row">
        <div class="label" data-ar="ุฑูู ุงูููู ุงูุทุจู:" data-en="Medical File No:">ุฑูู ุงูููู ุงูุทุจู:</div>
        <div class="value" id="medicalFileNumber">ุฌุงุฑู ุงูุชุญููู...</div>
        <div class="label" data-ar="ุงูุฌูุฉ ุงููุญุงูุฉ:" data-en="Referred To:">ุงูุฌูุฉ ุงููุญุงูุฉ:</div>
        <div class="value" id="departmentName">ุฌุงุฑู ุงูุชุญููู...</div>
      </div>
    </div>
  </section>

  <section class="timeline-box">
    <div class="status-steps" id="timelineSteps">
      <!-- ุณูุชู ุจูุงุก ุงูู timeline ุฏููุงููููุงู ูู ุณุฌู ุงูุชุงุฑูุฎ -->
    </div>

    <div class="timeline-updates">
      <table>
        <thead>
          <tr>
            <th data-ar="ุงูููุงุญุธุงุช" data-en="Notes">ุงูููุงุญุธุงุช</th>
            <th data-ar="ุงููุณุคูู" data-en="Employee">ุงููุณุคูู</th>
            <th data-ar="ุงูุชุงุฑูุฎ" data-en="Date">ุงูุชุงุฑูุฎ</th>
            <th data-ar="ุงููุฑุญูุฉ" data-en="Stage">ุงููุฑุญูุฉ</th>
          </tr>
        </thead>
        <tbody id="historyContainer">
          <!-- ุณูุชู ุชุนุจุฆุฉ ุงูุจูุงูุงุช ุฏููุงููููุงู -->
        </tbody>
      </table>
    </div>
  </section>

  <section class="complaint-details-box">
    <div class="details-header">
      <h4 data-ar="ุชูุงุตูู ุงูุดููู" data-en="Complaint Details">ุชูุงุตูู ุงูุดููู</h4>
      <span class="category" id="complaintCategory" data-ar="ุฌุงุฑู ุงูุชุญููู..." data-en="Loading...">ุฌุงุฑู ุงูุชุญููู...</span>
      <span class="type" id="complaintType" data-ar="ุฌุงุฑู ุงูุชุญููู..." data-en="Loading...">ุฌุงุฑู ุงูุชุญููู...</span>
    </div>
    <div class="details-row">
      <label data-ar="ุงููุตู:" data-en="Description:">ุงููุตู:</label>
      <div class="description-box" id="complaintDetails">ุญุถุฑุช ูู ููุนุฏู ููู ุฃุฌุฏ ุงูุนูุงุฌ ูู ุงูุตูุฏููุฉ...</div>
    </div>
    <div class="details-row">
      <label data-ar="ุงููุฑููุงุช:" data-en="Attachments:">ุงููุฑููุงุช:</label>
      <a href="#" class="attachments-link" data-ar="๐ ูุนุงููุฉ ุงููุฑููุงุช" data-en="๐ View Attachments">๐ ูุนุงููุฉ ุงููุฑููุงุช</a>
    </div>
  </section>

  <section class="current-status-box">
    <div class="status-row">
      <div class="status-dot"></div>
      <div><strong data-ar="ุงูุญุงูุฉ ุงูุญุงููุฉ:" data-en="Current Status:">ุงูุญุงูุฉ ุงูุญุงููุฉ:</strong> <span id="complaintStatus" data-ar="ููุฏ ุงููุฑุงุฌุนุฉ" data-en="Under Review">ููุฏ ุงููุฑุงุฌุนุฉ</span></div>
    </div>

    <p class="status-line" id="approvedByEmployee" data-ar="ุฌุงุฑู ุงูุชุญููู..." data-en="Loading...">ุฌุงุฑู ุงูุชุญููู...</p>
    <p class="status-line" id="statusNotes" data-ar="ุฌุงุฑู ุงูุชุญููู..." data-en="Loading...">ุฌุงุฑู ุงูุชุญููู...</p>
    <p class="timestamp" data-ar="ุฌุงุฑู ุงูุชุญููู..." data-en="Loading...">ุฌุงุฑู ุงูุชุญููู...</p>

    <div class="status-actions">
      <a href="/general complaints/general-complaints.html" class="btn-secondary">
        <img src="/icon/home.png" alt="home" />
        <span data-ar="ุงูุนูุฏุฉ ููุงุฆูุฉ ุงูุดูุงูู" data-en="Back to Complaint List">ุงูุนูุฏุฉ ููุงุฆูุฉ ุงูุดูุงูู</span>
      </a>
      <button class="btn-primary" onclick="printPage()">
        <img src="/icon/print1.png" alt="print" />
        <span data-ar="ุทุจุงุนุฉ ุงูุดููู" data-en="Print Complaint">ุทุจุงุนุฉ ุงูุดููู</span>
      </button>
    </div>
  </section>
</div>
</body>
<script>
  (function () {
    // ุงุณุชุฎุฏูู ููุณ ุงูุชุฎุฒูู ุนูุฏู: localStorage.user ูุญุชูู RoleID
    function redirectByRole() {
      const user = JSON.parse(localStorage.getItem('user') || 'null');

      const roleId = Number(user.RoleID || user.roleId);
      if (roleId === 1) return '/superadmin/superadmin-home.html'; // ุณูุจุฑ ุฃุฏูู
      if (roleId === 2) return '/employee/employee-home.html';   // ููุธู
      if (roleId === 3) return '/dept-admin/dept-admin.html';     // ุฃุฏูู
    }

    // ูู ุฑูุงุจุท "ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ" ุงูููุฌูุฏุฉ ูู ุงูุดุฑูุท ุงูุฌุงูุจู
    const homeLinks = document.querySelectorAll(
      'aside .sidebar-menu a.menu-link[href$="/login/login.html"], aside .sidebar-menu a.menu-link[data-en="Home Page"], aside .sidebar-menu a.menu-link[data-ar="ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ"]'
    );

    homeLinks.forEach(a => {
      // ุฎูููู ุงูููุฑ ููุฌูู ุญุณุจ ุงูุฏูุฑ
      a.addEventListener('click', (e) => {
        e.preventDefault();
        window.location.href = redirectByRole();
      });

      // (ุงุฎุชูุงุฑู) ุนุฏููู ุงูู href ุงูุธุงูุฑ ููู Hover/Copy
      a.setAttribute('href', redirectByRole());
    });
  })();
</script>

</html>
